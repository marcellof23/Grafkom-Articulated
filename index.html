<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style/main.css" />
    <script id="vertex-shader" type="x-shader/x-vertex">
      precision mediump float;
      attribute vec4 aVertexPosition;
      attribute vec4 aVertexColor;
      attribute vec3 aVertexNormal;

      //attribute vec3 a_normal;
      //attribute vec2 texcoord;

      uniform mat4 uNormalMatrix;
      uniform mat4 uWorldMatrix;
      uniform mat4 uModelViewMatrix;
      uniform mat4 uProjectionMatrix;

      varying lowp vec4 vColor;

      varying highp vec3 vLighting;
      uniform highp vec3 directionalVector;
      //varying vec3 v_normal;
      void main(void) {
        gl_Position = uProjectionMatrix * uModelViewMatrix * uWorldMatrix * aVertexPosition;
        vColor = aVertexColor;
        //v_normal = a_normal;
        gl_PointSize = 3.0;
        highp vec3 ambientLight = vec3(0.3, 0.3, 0.3);
        highp vec3 directionalLightColor = vec3(1, 1, 1);
        // directionalVector = normalize(vec3(0, 1, 1));

        highp vec4 transformedNormal = uNormalMatrix * vec4(aVertexNormal, 1.0);

        highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);
        vLighting = ambientLight + (directionalLightColor * directional);
      }
    </script>
    <script id="fragment-shader" type="x-shader/x-fragment">
      precision mediump float;
      varying lowp vec4 vColor;

      //varying vec3 v_normal;
      //uniform vec3 u_reverseLightDirection;
      //uniform vec4 u_color;

      varying highp vec3 vLighting;
      void main(void) {
        //vec3 normal = normalize(v_normal);
        //float light = dot(normal, u_reverseLightDirection);
        //gl_FragColor = vColor;
        gl_FragColor = vec4(vColor.rgb * vLighting, vColor.a);
        //gl_FragColor = u_color;
        //gl_FragColor.rgb *= light;
      }
    </script>
    <script id="fragment-shader-no-shade" type="x-shader/x-fragment">
      precision mediump float;
      varying lowp vec4 vColor;
      void main(void) {
        gl_FragColor = vColor;
      }
    </script>
    <title>Document</title>
  </head>

  <body>
    <div class="row">
      <div class="column">
          <button id="showHelp" style="width: 25%">HELP MENU</button>
          <div id="modal" style="display: none">
              <button id="closeHelp" style="width: 25%">CLOSE HELP MENU</button>
              <h2>HELP</h2>
              
          </div>
          <div class="canvas-wrapper">
            <canvas id="webgl"> Oops ... your browser doesn't support the HTML5 canvas element </canvas>
          </div>
          <div style="padding:10px; background-color:#bbb;">
              <label> Load Model: </label>
              <button id="LoadButton">Load Button</button>
              <br>
              <p>Current model: <span id="currModel">None</span></p>
              <button id="setDefaultView">Default View</button>
          </div>
      </div>
      <div class="column" style="padding:20px;">
          <div>
              <h1>Articulate Model</h1>
          </div>

          <br>
          <div style="padding:10px; background-color:#bbb;">
              <label for="jenisProyeksi">Jenis Proyeksi</label>
              <select name="jenisProyeksi" id="jenisProyeksi">
                  <option disabled selected value="default">Select jenis proyeksi</option>
                  <option value="orthographic">orthographic</option>
                  <option value="oblique">oblique</option>
                  <option value="perspective">perspective</option>
              </select>
              <br>
              <br>
              <div>
                  <label>Rotasi X: </label>
                  <input type="range" min="1" max="100" value="50" step= 0.01 class="slider" id="rotasiX">
                  <label>Rotasi Y: </label>
                  <input type="range" min="1" max="100" value="50" step= 0.01 class="slider" id="rotasiY">
                  <label>Rotasi Z: </label>
                  <input type="range" min="1" max="100" value="50" step= 0.01 class="slider" id="rotasiZ">

              </div>
              <div>
                  <label>Translasi X:</label>
                  <input type="range" min="1" max="100" value="50" class="slider" id="translasiX">
                  <label>Translasi Y:</label>
                  <input type="range" min="1" max="100" value="50" class="slider" id="translasiY">
                  <label>Translasi Z:</label>
                  <input type="range" min="1" max="100" value="50" class="slider" id="translasiZ">
              </div>
              <div>
                  <label>Scaling X:</label>
                  <input type="range" min="-15" max="15" step= 0.01 value="1" class="slider" id="scalingX">
                  <label>Scaling Y:</label>
                  <input type="range" min="-15" max="15" step= 0.01 value="1" class="slider" id="scalingY">
                  <label>Scaling Z:</label>
                  <input type="range" min="-15" max="15" step= 0.01 value="1" class="slider" id="scalingZ">
              </div>
              <div>
                  <label>Camera view radius</label>
                  <input type="range" min="0" max="100" value="10" class="slider" id="cameraViewRad">
                  <div>
                      <label>Camera rotation X:</label>
                      <input type="range" min="-360" max="360" value="0" class="slider" id="cameraRotationX">
                      <label>Camera rotation Y:</label>
                      <input type="range" min="-360" max="360" value="0" class="slider" id="cameraRotationY">
                      <label>Camera rotation Z:</label>
                      <input type="range" min="-360" max="360" value="0" class="slider" id="cameraRotationZ">
                  </div> <br>
                  <div>
                      <label>Shading</label>
                      <input type="checkbox" id="shaderStatus" name="shaderStatus">
                  </div>

              </div>
              
          </div>
      </div>

      <script type="module" src="loader/shader.js"></script>
      <script type="module" src="script/script.js"></script>
      <script type="module" src="lib/lib.js"></script>
      <script>
          document.getElementById("showHelp").addEventListener("click", function () {
              modal.style.display = "block";
              showHelp.style.display = "none";
          });

          document.getElementById("closeHelp").addEventListener("click", function () {
              console.log("masuk");
              modal.style.display = "none";
              showHelp.style.display = "block";
          });
      </script>
  </body>
  <script src="src/model/object.mjs"></script>
  <script src="src/model/cube.mjs"></script>
  <script src="src/helpers/gl-matrix.mjs"></script>
  <script src="src/helpers/helper.mjs"></script>
  <script src="src/helpers/initShaders.mjs"></script>
  <script src="src/helpers/webgl-utils.mjs"></script>
  <script src="src/constants/const.mjs"></script>
  <script src="src/index.mjs"></script>
</html>
